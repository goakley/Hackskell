<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Hack.Translator</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Hack-Translator.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">Hack-0.0.0: Tools for the Hack computer architecture</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr></table><p class="caption">Hack.Translator</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>The Translator provides a way to convert the specified virtual machine to assembly.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span>  <a href="#t:Command">Command</a> <ul class="subs"><li>= <a href="#v:Add">Add</a>  </li><li>| <a href="#v:Sub">Sub</a>  </li><li>| <a href="#v:Neg">Neg</a>  </li><li>| <a href="#v:Eq">Eq</a>  </li><li>| <a href="#v:Gt">Gt</a>  </li><li>| <a href="#v:Lt">Lt</a>  </li><li>| <a href="#v:And">And</a>  </li><li>| <a href="#v:Or">Or</a>  </li><li>| <a href="#v:Not">Not</a>  </li><li>| <a href="#v:Push">Push</a> <a href="Hack-Translator.html#t:Segment">Segment</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Int.html#t:Int">Int</a>  </li><li>| <a href="#v:Pop">Pop</a> <a href="Hack-Translator.html#t:Segment">Segment</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Int.html#t:Int">Int</a>  </li><li>| <a href="#v:Label">Label</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>  </li><li>| <a href="#v:Goto">Goto</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>  </li><li>| <a href="#v:IfGoto">IfGoto</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>  </li><li>| <a href="#v:Function">Function</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Int.html#t:Int">Int</a>  </li><li>| <a href="#v:Call">Call</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Int.html#t:Int">Int</a>  </li><li>| <a href="#v:Return">Return</a>  </li></ul></li><li class="src short"><span class="keyword">data</span>  <a href="#t:Segment">Segment</a> <ul class="subs"><li>= <a href="#v:Argument">Argument</a>  </li><li>| <a href="#v:Local">Local</a>  </li><li>| <a href="#v:Static">Static</a>  </li><li>| <a href="#v:Constant">Constant</a>  </li><li>| <a href="#v:This">This</a>  </li><li>| <a href="#v:That">That</a>  </li><li>| <a href="#v:Pointer">Pointer</a>  </li><li>| <a href="#v:Temp">Temp</a>  </li></ul></li><li class="src short"><a href="#v:translate">translate</a> :: [(<a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>, [<a href="Hack-Translator.html#t:Command">Command</a>])] -&gt; <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a> [<a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>] [<a href="Hack-Assembler.html#t:Instruction">Instruction</a>]</li><li class="src short"><a href="#v:parseVM">parseVM</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> -&gt; <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a> [<a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>] [<a href="Hack-Translator.html#t:Command">Command</a>]</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Command" class="def">Command</a>  </p><div class="doc"><p>All of the VM command types
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Add" class="def">Add</a></td><td class="doc"><p>Pops the top 2 values (STACK,x,y) from the stack and pushes their addition (x+y)
</p></td></tr><tr><td class="src"><a name="v:Sub" class="def">Sub</a></td><td class="doc"><p>Pops the top 2 values (STACK,x,y) from the stack and pushes their subtraction (x-y)
</p></td></tr><tr><td class="src"><a name="v:Neg" class="def">Neg</a></td><td class="doc"><p>Arithmetic negation of the top value of the stack
</p></td></tr><tr><td class="src"><a name="v:Eq" class="def">Eq</a></td><td class="doc"><p>Pops the top 2 values (STACK,x,y) from the stack and pushes -1 if equal else 0
</p></td></tr><tr><td class="src"><a name="v:Gt" class="def">Gt</a></td><td class="doc"><p>Pops the top 2 values (STACK,x,y) from the stack and pushes -1 if x &gt; y else 0
</p></td></tr><tr><td class="src"><a name="v:Lt" class="def">Lt</a></td><td class="doc"><p>Pops the top 2 values (STACK,x,y) from the stack and pushes -1 if x &lt; y else 0
</p></td></tr><tr><td class="src"><a name="v:And" class="def">And</a></td><td class="doc"><p>Pops the top 2 values (STACK,x,y) from the stack and pushes their bitwise AND
</p></td></tr><tr><td class="src"><a name="v:Or" class="def">Or</a></td><td class="doc"><p>Pops the top 2 values (STACK,x,y) from the stack and pushes their bitwise OR
</p></td></tr><tr><td class="src"><a name="v:Not" class="def">Not</a></td><td class="doc"><p>Bitwise NOT of the top value of the stack
</p></td></tr><tr><td class="src"><a name="v:Push" class="def">Push</a> <a href="Hack-Translator.html#t:Segment">Segment</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>Pushes a value from the top of the stack into the specified memory area
</p></td></tr><tr><td class="src"><a name="v:Pop" class="def">Pop</a> <a href="Hack-Translator.html#t:Segment">Segment</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>Pops a value from the specified memory area to the top of the stack
</p></td></tr><tr><td class="src"><a name="v:Label" class="def">Label</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a></td><td class="doc"><p>Declares a function-local label
</p></td></tr><tr><td class="src"><a name="v:Goto" class="def">Goto</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a></td><td class="doc"><p>Jumps to a label defined in the same function
</p></td></tr><tr><td class="src"><a name="v:IfGoto" class="def">IfGoto</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a></td><td class="doc"><p>Jumps if the top of the stack is not 0
</p></td></tr><tr><td class="src"><a name="v:Function" class="def">Function</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>Defines a named function that has the specified number of local variables
</p></td></tr><tr><td class="src"><a name="v:Call" class="def">Call</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>Calls the named function with the specified number of arguments already on the stack
</p></td></tr><tr><td class="src"><a name="v:Return" class="def">Return</a></td><td class="doc"><p>Transfers flow back to the calling function
</p></td></tr></table></div><div class="subs instances"><p id="control.i:Command" class="caption collapser" onclick="toggleSection('i:Command')">Instances</p><div id="section.i:Command" class="show"><table><tr><td class="src"><a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Eq.html#t:Eq">Eq</a> <a href="Hack-Translator.html#t:Command">Command</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Text-Read.html#t:Read">Read</a> <a href="Hack-Translator.html#t:Command">Command</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Text-Show.html#t:Show">Show</a> <a href="Hack-Translator.html#t:Command">Command</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Segment" class="def">Segment</a>  </p><div class="doc"><p>References a certain segment of VM <code>memory</code>
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Argument" class="def">Argument</a></td><td class="doc"><p>stores the function's arguments
</p></td></tr><tr><td class="src"><a name="v:Local" class="def">Local</a></td><td class="doc"><p>stores the function's local variables
</p></td></tr><tr><td class="src"><a name="v:Static" class="def">Static</a></td><td class="doc"><p>stores static variables shared by all functions in the same .vm file
</p></td></tr><tr><td class="src"><a name="v:Constant" class="def">Constant</a></td><td class="doc"><p>pseudo-segment that holds al the constants in the range 0...32767
</p></td></tr><tr><td class="src"><a name="v:This" class="def">This</a></td><td class="doc"><p>general-purpose segments can be made to correspond to different areas in the heap
</p></td></tr><tr><td class="src"><a name="v:That" class="def">That</a></td><td class="doc"><p>serves various programming needs
</p></td></tr><tr><td class="src"><a name="v:Pointer" class="def">Pointer</a></td><td class="doc"><p>a two-entry segment that holds the base addresses of the this and that segements
</p></td></tr><tr><td class="src"><a name="v:Temp" class="def">Temp</a></td><td class="doc"><p>fixed eight-entry segment that holds temporary variables for general use
</p></td></tr></table></div><div class="subs instances"><p id="control.i:Segment" class="caption collapser" onclick="toggleSection('i:Segment')">Instances</p><div id="section.i:Segment" class="show"><table><tr><td class="src"><a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Eq.html#t:Eq">Eq</a> <a href="Hack-Translator.html#t:Segment">Segment</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Text-Read.html#t:Read">Read</a> <a href="Hack-Translator.html#t:Segment">Segment</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Text-Show.html#t:Show">Show</a> <a href="Hack-Translator.html#t:Segment">Segment</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:translate" class="def">translate</a> :: [(<a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>, [<a href="Hack-Translator.html#t:Command">Command</a>])] -&gt; <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a> [<a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>] [<a href="Hack-Assembler.html#t:Instruction">Instruction</a>]</p><div class="doc"><p>Translates VM code into Assembly; provides informative error strings on failure
</p></div></div><div class="top"><p class="src"><a name="v:parseVM" class="def">parseVM</a> :: <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a> -&gt; <a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Either.html#t:Either">Either</a> [<a href="file:///usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-String.html#t:String">String</a>] [<a href="Hack-Translator.html#t:Command">Command</a>]</p><div class="doc"><p>Transforms VM source code into its virtual representation; provides informative error strings on failure
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2</p></div></body></html>